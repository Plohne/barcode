var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequirea202;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,a.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequirea202=a),a.register;var i=a("ccbGL"),r=a("1MkCa");const o=document.getElementById("fridgeName"),d=document.getElementById("logoutBtn"),l=document.getElementById("loadingState"),c=document.getElementById("emptyState"),u=document.getElementById("inventoryList");let s=null;async function m(){try{await (0,i.initializeFirebase)(),console.log("Firebase ready");let e=await (0,r.getFridgeInfo)(s);e&&e.name?o.textContent=e.name:o.textContent=s,await y()}catch(e){console.error("Init error:",e),p("Kunne ikke laste kjøleskapet")}}async function y(){l.hidden=!1,c.hidden=!0,u.hidden=!0;try{let e=await (0,r.getFridgeItems)(s);if(!e||0===e.length){f(),c.hidden=!1,u.hidden=!0;return}f(),c.hidden=!0,u.hidden=!1,u.innerHTML="",e.forEach(e=>{let t=document.createElement("li");t.className="inventory-item",t.dataset.id=e.id,t.innerHTML=`
      <p class="item-name">${function(e){let t=document.createElement("div");return t.textContent=e,t.innerHTML}(e.productName||e.barcode)}</p>
      <div class="item-controls">
        <button type="button" class="qty-btn" data-action="decrease">\u{2212}</button>
        <input type="number" class="item-qty-input" value="${e.quantity}" min="0" max="99" data-action="set-qty">
        <button type="button" class="qty-btn" data-action="increase">+</button>
        <button type="button" class="remove-btn" data-action="remove" title="Fjern">\u{1F5D1}</button>
      </div>
    `,u.appendChild(t)}),u.querySelectorAll(".qty-btn, .remove-btn").forEach(t=>{t.addEventListener("click",async n=>{let a=t.dataset.action,i=t.closest(".inventory-item").dataset.id,o=e.find(e=>e.id===i);o&&("remove"===a?confirm("Fjerne fra kjøleskapet?")&&(await (0,r.removeFromFridge)(i),await y()):"increase"===a?(await (0,r.updateFridgeItemQuantity)(i,o.quantity+1),await y()):"decrease"===a&&(o.quantity<=1?confirm("Fjerne fra kjøleskapet?")&&(await (0,r.removeFromFridge)(i),await y()):(await (0,r.updateFridgeItemQuantity)(i,o.quantity-1),await y())))})}),u.querySelectorAll(".item-qty-input").forEach(e=>{e.addEventListener("change",async t=>{let n=e.closest(".inventory-item").dataset.id,a=parseInt(e.value)||0;a<=0?confirm("Fjerne fra kjøleskapet?")?(await (0,r.removeFromFridge)(n),await y()):e.value=1:(await (0,r.updateFridgeItemQuantity)(n,a),await y())})})}catch(e){console.error("Load error:",e),p("Kunne ikke laste innhold")}}function f(){l.hidden=!0}function p(e){f(),c.hidden=!1,c.querySelector("p").textContent=e}(s=(0,r.getCurrentFridgeCode)())||(window.location.href="index.html"),d?.addEventListener("click",()=>{confirm("Vil du logge ut?")&&(r.setCurrentFridgeCode(null),window.location.href="index.html")}),m();
//# sourceMappingURL=inventory.07a8231b.js.map
